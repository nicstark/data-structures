
var width = 750, height = 400;
  

  var canvas = d3.select('#container')
  .append('canvas')
  .attr('width', width)
  .attr('height', height);
  

  var context = canvas.node().getContext('2d');
  console.log("init ran");

    var customBase = document.createElement('custom');
  var custom = d3.select(customBase); 
  // This is your SVG replacement and the parent of all other elements
    

      
      
var someData = [{"sensorvalue":231,"sensortime":"2018-11-19T22:04:09.558Z"},{"sensorvalue":272,"sensortime":"2018-11-19T22:05:09.617Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:06:09.654Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:07:09.707Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:08:09.613Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:13:40.960Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:14:41.978Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:15:41.033Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:16:41.090Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:17:41.162Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:18:41.198Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:19:41.253Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:20:41.325Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:21:41.358Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:22:41.430Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:23:41.482Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:24:41.530Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:25:41.586Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:26:41.655Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:27:42.160Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:28:40.743Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:29:41.825Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:30:40.854Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:31:40.909Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:32:40.959Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:33:41.027Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:34:41.081Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:35:41.135Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:36:41.194Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:37:41.245Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:38:41.313Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:39:41.356Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:40:42.951Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:41:41.454Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:42:41.506Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:43:41.598Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:44:41.623Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:45:41.691Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:46:41.753Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:47:40.810Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:48:40.865Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:49:40.913Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:50:40.983Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:51:41.035Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:52:41.062Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:53:41.113Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:54:42.299Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:55:41.234Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:56:41.318Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:57:41.373Z"},{"sensorvalue":1,"sensortime":"2018-11-19T22:58:41.411Z"},{"sensorvalue":0,"sensortime":"2018-11-19T22:59:41.462Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:00:41.512Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:01:41.804Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:02:41.633Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:03:41.686Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:04:40.719Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:05:40.793Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:06:40.843Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:07:40.906Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:08:41.957Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:09:41.058Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:10:41.088Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:11:41.208Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:12:41.181Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:13:41.241Z"},{"sensorvalue":2,"sensortime":"2018-11-19T23:14:41.276Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:15:41.347Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:16:41.401Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:17:41.443Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:18:41.513Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:19:41.557Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:20:41.633Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:21:41.690Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:22:40.819Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:23:40.797Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:24:40.843Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:25:40.913Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:26:40.946Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:27:41.512Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:28:41.066Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:29:41.131Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:30:41.176Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:31:41.236Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:32:41.319Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:33:41.355Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:34:41.397Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:35:41.469Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:36:41.500Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:37:41.574Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:38:41.619Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:39:41.676Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:40:41.746Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:41:41.767Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:42:40.841Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:43:40.910Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:44:40.954Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:45:41.002Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:46:41.067Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:47:41.111Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:48:41.156Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:49:41.215Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:50:41.282Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:51:41.357Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:52:41.395Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:53:41.444Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:54:41.502Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:55:41.543Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:56:41.617Z"},{"sensorvalue":0,"sensortime":"2018-11-19T23:57:41.674Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:58:41.778Z"},{"sensorvalue":1,"sensortime":"2018-11-19T23:59:41.778Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:00:40.827Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:01:40.891Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:02:40.949Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:03:41.008Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:04:41.065Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:05:41.144Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:06:41.185Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:07:41.667Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:08:41.303Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:09:41.337Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:10:41.374Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:11:41.431Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:12:42.047Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:13:41.537Z"},{"sensorvalue":404,"sensortime":"2018-11-20T00:14:41.611Z"},{"sensorvalue":148,"sensortime":"2018-11-20T00:15:41.680Z"},{"sensorvalue":112,"sensortime":"2018-11-20T00:16:41.725Z"},{"sensorvalue":297,"sensortime":"2018-11-20T00:17:41.775Z"},{"sensorvalue":130,"sensortime":"2018-11-20T00:18:40.842Z"},{"sensorvalue":95,"sensortime":"2018-11-20T00:19:42.371Z"},{"sensorvalue":142,"sensortime":"2018-11-20T00:20:40.993Z"},{"sensorvalue":84,"sensortime":"2018-11-20T00:21:40.992Z"},{"sensorvalue":127,"sensortime":"2018-11-20T00:22:41.046Z"},{"sensorvalue":78,"sensortime":"2018-11-20T00:23:41.112Z"},{"sensorvalue":160,"sensortime":"2018-11-20T00:24:41.177Z"},{"sensorvalue":265,"sensortime":"2018-11-20T00:25:41.218Z"},{"sensorvalue":384,"sensortime":"2018-11-20T00:26:41.287Z"},{"sensorvalue":382,"sensortime":"2018-11-20T00:27:41.309Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:28:41.386Z"},{"sensorvalue":169,"sensortime":"2018-11-20T00:29:41.440Z"},{"sensorvalue":123,"sensortime":"2018-11-20T00:30:41.478Z"},{"sensorvalue":148,"sensortime":"2018-11-20T00:31:41.591Z"},{"sensorvalue":277,"sensortime":"2018-11-20T00:32:41.590Z"},{"sensorvalue":139,"sensortime":"2018-11-20T00:33:41.680Z"},{"sensorvalue":241,"sensortime":"2018-11-20T00:34:41.733Z"},{"sensorvalue":136,"sensortime":"2018-11-20T00:35:41.783Z"},{"sensorvalue":123,"sensortime":"2018-11-20T00:36:40.817Z"},{"sensorvalue":268,"sensortime":"2018-11-20T00:37:41.877Z"},{"sensorvalue":99,"sensortime":"2018-11-20T00:38:40.929Z"},{"sensorvalue":105,"sensortime":"2018-11-20T00:39:40.988Z"},{"sensorvalue":42,"sensortime":"2018-11-20T00:40:41.050Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:41:41.123Z"},{"sensorvalue":2,"sensortime":"2018-11-20T00:42:41.154Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:43:41.207Z"},{"sensorvalue":425,"sensortime":"2018-11-20T00:44:43.260Z"},{"sensorvalue":274,"sensortime":"2018-11-20T00:45:41.319Z"},{"sensorvalue":298,"sensortime":"2018-11-20T00:46:41.396Z"},{"sensorvalue":431,"sensortime":"2018-11-20T00:47:41.435Z"},{"sensorvalue":258,"sensortime":"2018-11-20T00:48:41.491Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:49:41.538Z"},{"sensorvalue":0,"sensortime":"2018-11-20T00:50:41.600Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:51:41.663Z"},{"sensorvalue":2,"sensortime":"2018-11-20T00:52:41.700Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:53:41.762Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:54:41.827Z"},{"sensorvalue":131,"sensortime":"2018-11-20T00:55:41.863Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:56:41.937Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:57:40.987Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:58:41.042Z"},{"sensorvalue":1,"sensortime":"2018-11-20T00:59:41.116Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:00:41.523Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:01:41.239Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:02:41.266Z"},{"sensorvalue":266,"sensortime":"2018-11-20T01:03:41.304Z"},{"sensorvalue":526,"sensortime":"2018-11-20T01:04:41.374Z"},{"sensorvalue":283,"sensortime":"2018-11-20T01:05:41.416Z"},{"sensorvalue":375,"sensortime":"2018-11-20T01:06:41.486Z"},{"sensorvalue":362,"sensortime":"2018-11-20T01:07:41.535Z"},{"sensorvalue":298,"sensortime":"2018-11-20T01:08:41.581Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:09:41.636Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:10:41.729Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:11:41.758Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:12:41.806Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:13:41.051Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:14:41.020Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:15:41.061Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:16:41.110Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:17:41.202Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:18:41.211Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:19:41.285Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:20:41.345Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:21:42.436Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:22:41.433Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:23:41.513Z"},{"sensorvalue":13,"sensortime":"2018-11-20T01:24:41.566Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:25:41.623Z"},{"sensorvalue":5,"sensortime":"2018-11-20T01:26:41.659Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:27:43.198Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:28:41.765Z"},{"sensorvalue":21,"sensortime":"2018-11-20T01:29:41.827Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:30:41.894Z"},{"sensorvalue":4,"sensortime":"2018-11-20T01:31:41.943Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:32:41.005Z"},{"sensorvalue":4,"sensortime":"2018-11-20T01:33:41.068Z"},{"sensorvalue":40,"sensortime":"2018-11-20T01:34:41.095Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:35:41.157Z"},{"sensorvalue":12,"sensortime":"2018-11-20T01:36:41.202Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:37:41.292Z"},{"sensorvalue":1,"sensortime":"2018-11-20T01:38:41.332Z"},{"sensorvalue":46,"sensortime":"2018-11-20T01:39:41.379Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:40:41.461Z"},{"sensorvalue":8,"sensortime":"2018-11-20T01:41:41.484Z"},{"sensorvalue":0,"sensortime":"2018-11-20T01:42:41.547Z"},{"sensorvalue":4,"sensortime":"2018-11-20T01:43:41.592Z"},{"sensorvalue":56,"sensortime":"2018-11-20T01:44:41.658Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:45:41.701Z"},{"sensorvalue":5,"sensortime":"2018-11-20T01:46:41.774Z"},{"sensorvalue":33,"sensortime":"2018-11-20T01:47:41.827Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:48:41.909Z"},{"sensorvalue":8,"sensortime":"2018-11-20T01:49:41.923Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:50:40.970Z"},{"sensorvalue":18,"sensortime":"2018-11-20T01:51:41.039Z"},{"sensorvalue":4,"sensortime":"2018-11-20T01:52:41.065Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:53:42.131Z"},{"sensorvalue":50,"sensortime":"2018-11-20T01:54:41.190Z"},{"sensorvalue":2,"sensortime":"2018-11-20T01:55:41.248Z"},{"sensorvalue":7,"sensortime":"2018-11-20T01:56:41.311Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:57:41.331Z"},{"sensorvalue":3,"sensortime":"2018-11-20T01:58:42.817Z"},{"sensorvalue":42,"sensortime":"2018-11-20T01:59:41.440Z"},{"sensorvalue":6,"sensortime":"2018-11-20T02:00:41.491Z"},{"sensorvalue":50,"sensortime":"2018-11-20T02:01:41.550Z"},{"sensorvalue":204,"sensortime":"2018-11-20T02:02:41.627Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:03:41.675Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:04:41.714Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:05:41.772Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:06:41.807Z"},{"sensorvalue":2,"sensortime":"2018-11-20T02:07:41.871Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:08:40.929Z"},{"sensorvalue":2,"sensortime":"2018-11-20T02:09:40.990Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:10:41.032Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:11:41.108Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:12:41.153Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:13:41.221Z"},{"sensorvalue":2,"sensortime":"2018-11-20T02:14:41.264Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:15:41.319Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:16:41.376Z"},{"sensorvalue":4,"sensortime":"2018-11-20T02:17:41.415Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:18:41.493Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:19:41.539Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:20:41.580Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:21:41.653Z"},{"sensorvalue":3,"sensortime":"2018-11-20T02:22:41.716Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:23:41.762Z"},{"sensorvalue":238,"sensortime":"2018-11-20T02:24:41.836Z"},{"sensorvalue":143,"sensortime":"2018-11-20T02:25:41.873Z"},{"sensorvalue":336,"sensortime":"2018-11-20T02:26:40.924Z"},{"sensorvalue":2,"sensortime":"2018-11-20T02:27:40.989Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:28:41.041Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:29:41.115Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:30:41.136Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:31:41.200Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:32:41.246Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:33:41.316Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:34:41.364Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:35:41.410Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:36:41.474Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:37:41.546Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:38:41.593Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:39:42.916Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:40:41.721Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:41:41.759Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:42:41.808Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:43:41.913Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:44:41.945Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:45:41.974Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:46:42.035Z"},{"sensorvalue":2,"sensortime":"2018-11-20T02:47:41.087Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:48:41.146Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:49:41.200Z"},{"sensorvalue":0,"sensortime":"2018-11-20T02:50:41.286Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:51:41.310Z"},{"sensorvalue":247,"sensortime":"2018-11-20T02:52:41.385Z"},{"sensorvalue":21,"sensortime":"2018-11-20T02:53:41.405Z"},{"sensorvalue":203,"sensortime":"2018-11-20T02:54:41.462Z"},{"sensorvalue":110,"sensortime":"2018-11-20T02:55:41.548Z"},{"sensorvalue":125,"sensortime":"2018-11-20T02:56:41.597Z"},{"sensorvalue":210,"sensortime":"2018-11-20T02:57:41.640Z"},{"sensorvalue":75,"sensortime":"2018-11-20T02:58:41.704Z"},{"sensorvalue":1,"sensortime":"2018-11-20T02:59:41.763Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:00:41.823Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:01:41.860Z"},{"sensorvalue":2,"sensortime":"2018-11-20T03:02:43.316Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:03:40.970Z"},{"sensorvalue":3,"sensortime":"2018-11-20T03:04:41.024Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:05:41.099Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:06:41.152Z"},{"sensorvalue":263,"sensortime":"2018-11-20T03:07:41.178Z"},{"sensorvalue":184,"sensortime":"2018-11-20T03:08:41.248Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:09:41.290Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:10:41.358Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:11:41.417Z"},{"sensorvalue":2,"sensortime":"2018-11-20T03:12:41.470Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:13:41.526Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:14:41.579Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:15:41.635Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:16:41.694Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:17:42.760Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:18:41.829Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:19:41.860Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:20:41.909Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:21:41.954Z"},{"sensorvalue":2,"sensortime":"2018-11-20T03:22:41.024Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:23:42.086Z"},{"sensorvalue":2,"sensortime":"2018-11-20T03:24:41.133Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:25:41.184Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:26:41.545Z"},{"sensorvalue":2,"sensortime":"2018-11-20T03:27:41.283Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:28:41.345Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:29:41.396Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:30:41.461Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:31:41.504Z"},{"sensorvalue":2,"sensortime":"2018-11-20T03:32:41.573Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:33:41.617Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:34:41.689Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:35:41.764Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:36:41.784Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:37:41.864Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:38:41.958Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:39:41.966Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:40:41.021Z"},{"sensorvalue":0,"sensortime":"2018-11-20T03:41:41.077Z"},{"sensorvalue":2,"sensortime":"2018-11-20T03:42:41.142Z"},{"sensorvalue":1,"sensortime":"2018-11-20T03:43:41.171Z"}];

     var on = 0;
      var blocks = [];
    
    for (var i = 0; i < someData.length; i++) {
      if (someData[i].sensorvalue > 1 && on == 0) {
        var block = {};
        block.start = Date.parse(someData[i].sensortime);
        on = 1;
      };
      if (someData[i].sensorvalue < 2 && on == 1) {
        block.end = Date.parse(someData[i].sensortime);
        block.duration = block.end - block.start;
        blocks.push(block);
        on = 0;
        };
    };



// Settings for a grid with 10 cells in a row, 
// 100 cells in a block and 1000 cells in a row.
var groupSpacing = 4; 
var cellSpacing = 2; 
var offsetTop = height / 5; 
var cellSize = Math.floor((width - 11 * groupSpacing) / 100) - cellSpacing;

function databind(data) {
// Get a scale for the colours - not essential but nice.
// colourScale = d3.scaleSequential(d3.interpolateSpectral)      
//                 .domain(d3.extent(data, function(d) { return d.start; }));
                
                var join = custom.selectAll('custom.rect')
  .data(data);
var enterSel = join.enter()
  .append('custom')
  .attr('class', 'rect')
  .attr("x", function(d, i) {
    var x0 = Math.floor(i / 100) % 10, x1 = Math.floor(i % 10);     
    return groupSpacing * x0 + (cellSpacing + cellSize) * (x1 + x0 * 10); })
  .attr("y", function(d, i) {
  var y0 = Math.floor(i / 1000), y1 = Math.floor(i % 100 / 10); 
  return groupSpacing * y0 + (cellSpacing + cellSize) * (y1 + y0 * 10); })
  .attr('width', 0)
  .attr('height', 0);
  
  
  join 
  .merge(enterSel)
  .transition()
  .attr('width', cellSize)
  .attr('height', cellSize)
  .attr('fillStyle', "black");
  
  var exitSel = join.exit()
  .transition()
  .attr('width', 0)
  .attr('height', 0)
  .remove();
  
  } // databind();
  
  function draw() {
      context.clearRect(0, 0, width, height); // Clear the canvas.
// Draw each individual custom element with their properties.
var elements = custom.selectAll('custom.rect');
// Grab all elements you bound data to in the databind() function.
elements.each(function(d,i) { // For each virtual/custom element...
  var node = d3.select(this); 
  // This is each individual element in the loop. 
  
  context.fillStyle = node.attr('fillStyle'); 
  // Here you retrieve the colour from the individual in-memory node and set the fillStyle for the canvas paint
  context.fillRect(node.attr('x'), node.attr('y'), node.attr('width'), node.attr('height'));
  // Here you retrieve the position of the node and apply it to the fillRect context function which will fill and paint the square.
}); // Loop through each element.

} // draw()

databind(blocks);
draw();

 window.onload = init;