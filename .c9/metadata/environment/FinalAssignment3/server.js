{"filter":false,"title":"server.js","tooltip":"/FinalAssignment3/server.js","undoManager":{"mark":85,"position":85,"stack":[[{"start":{"row":49,"column":11},"end":{"row":107,"column":18},"action":"remove","lines":["<!DOCTYPE html>","<html>","  <head>","    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\">","    <title>Condegram Spiral Plot</title>","      <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\"/>","      <script data-require=\"d3@4.0.0\" data-semver=\"4.0.0\" src=\"https://d3js.org/d3.v4.js\"></script>","      <script src=\"https://d3js.org/d3-array.v1.min.js\"></script>","      <script src=\"https://d3js.org/d3-color.v1.min.js\"></script>","      <script src=\"https://d3js.org/d3-format.v1.min.js\"></script>","      <script src=\"https://d3js.org/d3-interpolate.v1.min.js\"></script>","      <script src=\"https://d3js.org/d3-time.v1.min.js\"></script>","      <script src=\"https://d3js.org/d3-time-format.v2.min.js\"></script>","      <script src=\"https://d3js.org/d3-scale.v2.min.js\"></script>","  </head>","  <body>","\t<div id=\"chart\"></div>","    <script>var width = 500,","      height = 500,","      start = 0,","      end = 3.3333333,","      numSpirals = 10","      margin = {top:50,bottom:50,left:50,right:50};","","    var theta = function(r) {","      return numSpirals * Math.PI * r;","    };","","    // used to assign nodes color by group","    var color = d3.scaleOrdinal(d3.schemeCategory10);","","    var r = d3.min([width, height]) / 2 - 40;","","    var radius = d3.scaleLinear()","      .domain([start, end])","      .range([40, r]);","","    var svg = d3.select(\"#chart\").append(\"svg\")","      .attr(\"width\", width + margin.right + margin.left)","      .attr(\"height\", height + margin.left + margin.right)","      .append(\"g\")","      .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");","","    var points = d3.range(start, end + 0.001, (end - start) / 1000);","","    var spiral = d3.radialLine()","      .curve(d3.curveCardinal)","      .angle(theta)","      .radius(radius);","","    var path = svg.append(\"path\")","      .datum(points)","      .attr(\"id\", \"spiral\")","      .attr(\"d\", spiral)","      .style(\"fill\", \"none\")","      .style(\"stroke\", \"#5e6fae\");","","","    var someData ="],"id":202},{"start":{"row":49,"column":11},"end":{"row":72,"column":14},"action":"insert","lines":["<!DOCTYPE html>","<html>","  <head>","    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\">","    <title>Bedside Lamp Visualization Data</title>","    <link href=\"https://fonts.googleapis.com/css?family=Playfair+Display:400,900\" rel=\"stylesheet\">","    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\"/>","      <script data-require=\"d3@4.0.0\" data-semver=\"4.0.0\" src=\"https://d3js.org/d3.v4.js\"></script>","      <script src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script>","      <script src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js\"></script>","  </head>","  <body>","    <div id=\"chart\"></div>","      <script>","    ","moment().format(); //needed for moment library","","var oneDay = 86401000, // hours*minutes*seconds*milliseconds","now = new Date(), //current time","width = window.innerWidth,","height = window.innerHeight,","margin = {top:0,bottom:0,left:0,right:0};","    ","var someData ="]}],[{"start":{"row":75,"column":0},"end":{"row":195,"column":7},"action":"remove","lines":["    var spiralLength = path.node().getTotalLength(),","        N = (someData.length)*10,","        barWidth = (spiralLength / N) - 1;","        ","    console.log(N);","    ","    var timeScale = d3.scaleLinear()","      //.domain(d3.extent(someData, function(d) { return d.sensortime; }))","      .domain(d3.extent(someData, function(d){return Date.parse(d.sensortime)}))","      .range([0, spiralLength]);","      ","","      ","    svg.selectAll(\"rect\")","      .data(someData)","      .enter()","      .append(\"rect\")","      .attr(\"x\", function(d,i){","        ","     ","        var linePer = timeScale(Date.parse(d.sensortime));","        var posOnLine = path.node().getPointAtLength(linePer),","            angleOnLine = path.node().getPointAtLength(linePer - barWidth);","      ","        d.linePer = linePer; // % distance are on the spiral","        d.x = posOnLine.x; // x postion on the spiral","        d.y = posOnLine.y; // y position on the spiral","        ","        d.a = (Math.atan2(angleOnLine.y, angleOnLine.x) * 180 / Math.PI) - 90; //angle at the spiral position","","        return d.x;","      })","      .attr(\"y\", function(d){","        return d.y;","      })","      .attr(\"width\", function(d){","        return barWidth;","      })","      .attr(\"height\", function(d){","        if (d.sensorvalue > 3){","        return (r / numSpirals)/2}","        else {","          return 0}","        ","      })","      .style(\"fill\", \"#cab122\")","      .style(\"stroke\", \"none\")","      .attr(\"transform\", function(d){","        return \"rotate(\" + d.a + \",\" + d.x  + \",\" + d.y + \")\"; // rotate the bar","      });","    ","    // add date labels","    var tF = d3.timeFormat(\"%b %Y\"),","        firstInMonth = {};","","    svg.selectAll(\"text\")","      .data(someData)","      .enter()","      .append(\"text\")","      .attr(\"dy\", 10)","      .style(\"text-anchor\", \"start\")","      .style(\"font\", \"10px arial\")","      .append(\"textPath\")","      // only add for the first of each month","      .filter(function(d){","        var sd = tF(d.sensortime);","        if (!firstInMonth[sd]){","          firstInMonth[sd] = 1;","          return true;","        }","        return false;","      })","      .text(function(d){","        return tF(d.sensortime);","      })","      // place text along spiral","      .attr(\"xlink:href\", \"#spiral\")","      .style(\"fill\", \"#5e6fae\")","      .attr(\"startOffset\", function(d){","        return ((d.linePer / spiralLength) * 100) + \"%\";","      })","","","    var tooltip = d3.select(\"#chart\")","    .append('div')","    .attr('class', 'tooltip');","","    tooltip.append('div')","    .attr('class', 'date');","    tooltip.append('div')","    .attr('class', 'value');","","    svg.selectAll(\"rect\")","    .on('mouseover', function(d) {","","        tooltip.select('.date').html(\"Date: <b>\" + d.sensortime.toDateString() + \"</b>\");","        tooltip.select('.value').html(\"Value: <b>\" + Math.round(d.sensorvalue*100)/100 + \"<b>\");","","        d3.select(this)","        .style(\"fill\",\"#FFFFFF\")","        .style(\"stroke\",\"#000000\")","        .style(\"stroke-width\",\"2px\");","","        tooltip.style('display', 'block');","        tooltip.style('opacity',2);","","    })","    .on('mousemove', function(d) {","        tooltip.style('top', (d3.event.layerY + 10) + 'px')","        .style('left', (d3.event.layerX - 25) + 'px');","    })","    .on('mouseout', function(d) {","        d3.selectAll(\"rect\")","        .style(\"fill\", \"#cab122\")","        .style(\"stroke\", \"none\")","","        tooltip.style('display', 'none');","        tooltip.style('opacity',0);","    });</script>","  </body>","</html>"],"id":203},{"start":{"row":75,"column":0},"end":{"row":348,"column":7},"action":"insert","lines":["// Here we take the data and group the entries by day of the year \"DDD\"","var groupedResults = _.groupBy(someData, function (result) {","  return moment(new Date(result['sensortime'])).utcOffset('+0100').format(\"DDD\");","});","","var dayCount = Object.keys(groupedResults).length, //Counting the number of days on record","blocks = [], //will hold our cleaned data","on = 0, //for the iterator to toggle ","lines = []; //to hold some numbers to draw the lines","        ","for(i=0; i <24; i++){","var x = i;","var y = i + 20;","lines.push([x,y]);","}; //creates some coordinates to draw lines","","//This is where we clean our data"," //looping through each day of grouped items","for (var day in groupedResults) {","","//looping though each item in group","  for (var item in groupedResults[day]){ ","    //saying if the light sensor was above 50 we will consider the bedside lamp having been on","    //it creates a new object and assigns some relevant values","    if (groupedResults[day][item].sensorvalue > 50 && on == 0) { ","      var block = {};","      block.day = day;","      block.readableStart = groupedResults[day][item].sensortime;","      block.start = Date.parse(moment(groupedResults[day][item].sensortime).utcOffset('+0100'));","      block.startHour = moment(groupedResults[day][item].sensortime).utcOffset('+0100').format(\"HH\");","      //this if statement deals with the calculation not working when the hour was 00, now it is switched to 24","      if (block.startHour == 0){ ","        block.startMinute = 24*60 + Number(moment(groupedResults[day][item].sensortime).format(\"mm\"))","      }","      else { ","        block.startMinute = Number(block.startHour*60) + Number(moment(groupedResults[day][item].sensortime).utcOffset('+0100').format(\"mm\"))","      };","      on = 1;","    };","    //here if the iterator runs into a value that is low enough to consider the bedside lamp was off it will append the value to to hte object and reset the on variable","    if (groupedResults[day][item].sensorvalue < 50 && on == 1) {","      block.end = Date.parse(moment(groupedResults[day][item].sensortime).utcOffset('+0100'));","      block.duration = block.end - block.start;","      block.readableEnd = groupedResults[day][item].sensortime;","      var nowStrip = now.setHours(0,0,0,0),","      thenStrip = new Date(block.start).setHours(0,0,0,0);","      block.diffDays = Math.round((Math.abs(nowStrip - thenStrip))/oneDay);","      block.raw = groupedResults[day][item].sensortime;","      block.endHour = moment(groupedResults[day][item].sensortime).utcOffset('+0100').format(\"HH\");","      if (block.endHour == 0){","        block.endMinute = 24*60 + Number(moment(groupedResults[day][item].sensortime).format(\"mm\"))","      }","      else {","        block.endMinute = Number(block.endHour*60) + Number(moment(groupedResults[day][item].sensortime).utcOffset('+0100').format(\"mm\"))","      };","      if (block.endMinute < block.startMinute){","        block.startMinute -= 24*60;","      };","      blocks.push(block);","      on = 0;","     }","  }","  ","//here a little safety measure to deal with when the lamp was on as the date turned over","","  if (block.end == null){","    block.end = Date.parse(moment(groupedResults[day][item].sensortime).utcOffset('+0100'));","      block.duration = block.end - block.start;","      block.readableEnd = groupedResults[day][item].sensortime;","      var nowStrip = now.setHours(0,0,0,0),","      thenStrip = new Date(block.start).setHours(0,0,0,0);","      block.diffDays = Math.round((Math.abs(nowStrip - thenStrip))/oneDay);","      block.raw = groupedResults[day][item].sensortime;","      block.endHour = moment(groupedResults[day][item].sensortime).utcOffset('+0100').format(\"HH\");","      block.endMinute = Number(block.endHour*60)+Number(moment(groupedResults[day][item].sensortime).utcOffset('+0100').format(\"mm\"));","      blocks.push(block);","      on = 0;","      };","};","","// Define the div for the tooltip","var div = d3.select(\"body\").append(\"div\")\t","    .attr(\"class\", \"tooltip\")\t\t\t\t","    .style(\"opacity\", 0);","","var svg = d3.select(\"body\").append(\"svg\")","  .attr(\"width\", width - (width*.05 ))","  .attr(\"height\", height - (height * .05))","  .append(\"g\")","  .attr(\"transform\", \"translate(\" + ((width / 2)- margin.left) + \",\" + ((height / 2) -margin.top) + \")\");","  ","var bars = d3.select(\"svg\").append(\"g\")","      .attr(\"transform\", \"translate(\" + ((width / 2)- margin.left) + \",\" + ((height/20)+ (height / 2) -margin.top)+ \")\");","","","var timeScale = d3.scaleLinear()","    .domain([0,1440])","    .range([0, (2* Math.PI)]);","    ","var x = d3.scaleLinear().domain([-50,50]).range([-width, width]);","var y = d3.scaleLinear().domain([-50,50]).range([height, -height]);","        ","var getdata = function() {","  var dataset = []","  for (var i = 0; i < 200; i++) {","    var x = d3.randomUniform(-50,50)();","    var y = d3.randomUniform(-50,50)();","    dataset.push({\"x\": x, \"y\": y});","  }","  return dataset","}","  ","// Get the data","var data = getdata()","","// format the data","data.forEach(function(d) {","  d.x = +d.x;","  d.y = +d.y;","});","","// scale the range of the data","x.domain([-50, 50]);","y.domain([-50, 50]);","","// add the dots","svg.selectAll(\"dot\")","  .data(data)","  .enter().append(\"circle\")","  .attr(\"r\", function getRandomInt() {","  return Math.floor(Math.random() * Math.floor(2));","})","  .attr(\"cx\", function(d) { return x(d.x); })","  .attr(\"cy\", function(d) { return y(d.y); })","  .attr(\"fill\", \"white\")","  .attr(\"opacity\", function getRandomInt() {","  return Math.random()/1.5;","});","  ","            ","//add outer circle","bars.append(\"circle\")","  .attr(\"cx\", 0)","  .attr(\"cy\",0)","  .attr(\"r\", height/3)","  .style(\"fill\", \"091954\")","  .style(\"stroke\", \"#5e6fae\");","","        ","//add the grid lines","bars.selectAll(\"rect\")","  .data(lines)","  .enter()","  .append(\"rect\")","  .attr(\"x\",0)","  .attr(\"y\",0)","  .attr(\"width\",1)","  .attr(\"height\", height/3)","  .attr(\"fill\", \"#16296f\")","  .attr(\"transform\", function(d,i){return \"rotate(\" + i *15 + \")\"});","      ","var radius = (height/3)/dayCount;","","","var min = d3.min(blocks, function(d) { return d.diffDays; });","","var rings = [];","  "," ","for (i = 0; i <dayCount; i++) {  ","  rings.push(i);","};","  ","","","","        ","//add grid circles   ","var circles = bars.selectAll(\"circle\")","  .data(rings)","  .enter()","  .append(\"circle\")","  .attr(\"cx\", 0)","  .attr(\"cy\",0)","  .attr(\"r\", function(d){return d*radius})","  .style(\"fill\", \"none\")","  .style(\"stroke\", \"#16296f\")","  .style(\"opacity\", \".3\");","  ","    ","//draw the 'light on' blocks","","var arc = d3.arc()","  .innerRadius(function(d){return dayCount*radius-(d.diffDays-min)*radius})","  .outerRadius(function(d){return dayCount*radius-(d.diffDays-min+1)*radius})","  .startAngle(function(d){return timeScale(d.startMinute)})","  .endAngle(function(d){return timeScale(d.endMinute)});","  ","bars.selectAll(\"path\")","  .data(blocks)","  .enter()","  .append(\"path\")","  .attr(\"d\", arc)","  .style(\"fill\", \"#cab122\")","  .on(\"mouseover\", function(d) {","      div.transition()\t\t","        .duration(200)\t\t","        .style(\"opacity\", .9);\t\t","      div\t.html(moment(d.start).utcOffset('+0100').format(\"HH:mm\") + \"<br/>\"  + moment.utc(d.start).format(\"dddd MMMM Do\") + \"<br/> Duration: \"  + moment(d.duration-3601000).format(\"HH:mm\"))\t","        .style(\"right\", \"10%\")\t\t","        .style(\"bottom\", \"45%\")","        .style(\"font-size\",\"100%\")","        .style(\"fill\", \"#cab122\")","        .style(\"font-family\", \"Playfair Display\")","        .style(\"font-weight\", \"400\")","        .style(\"letter-spacing\", \"1px\")","  })","  .on(\"mouseout\", function(d) {\t\t","      div.transition()\t\t","        .duration(10100)\t\t","        .style(\"opacity\", 0);\t","  });","  ","","// header text  ","var words =[\"Denotes times when bedside lamp was on\"];","","svg.append(\"text\")","  .attr(\"x\", 0)","  .attr(\"y\", (-height/2)+(height/8))","  .text(words)","  .style(\"font-size\",\"200%\")","  .style(\"fill\", \"#cab122\")","  .style(\"font-family\", \"Playfair Display\")","  .style(\"font-weight\", \"900\")","  .style(\"letter-spacing\", \"1px\")","  .style(\"text-align\", \"center\")","  .style(\"text-anchor\", \"middle\");","            ","var hourScale = d3.scaleLinear()","  .range([0,360])","  .domain([0,24]);","  ","var radians = 0.0174532925,","    secondLabelYOffset = 5,","    secondLabelRadius = height/2.8;","        ","//add the hour labels","bars.selectAll('.second-label')","\t.data(d3.range(1,25,1))","\t\t.enter()","\t\t.append('text')","\t\t.attr('class', 'second-label')","\t\t.attr('text-anchor','middle')","\t\t.attr('x',function(d){","\t\t\treturn secondLabelRadius*Math.sin(hourScale(d)*radians);","\t\t})","\t\t.attr('y',function(d){","\t\t\treturn -secondLabelRadius*Math.cos(hourScale(d)*radians) + secondLabelYOffset;","\t\t})","\t\t.text(function(d){","\t\t\treturn d;","\t\t})","      .style(\"font-size\",\"100%\")","      .style(\"fill\", \"#5e6fae\")","      .style(\"font-family\", \"Playfair Display\")","      .style(\"font-weight\", \"400\")","      .style(\"letter-spacing\", \"4px\")","      .style(\"text-align\", \"center\")","      .style(\"text-anchor\", \"middle\");;","","  </script>","  </body>","</html>"]}],[{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"remove","lines":["    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\"/>",""],"id":204}],[{"start":{"row":57,"column":95},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":205},{"start":{"row":58,"column":0},"end":{"row":58,"column":6},"action":"insert","lines":["      "]},{"start":{"row":58,"column":6},"end":{"row":58,"column":7},"action":"insert","lines":["<"]},{"start":{"row":58,"column":7},"end":{"row":58,"column":8},"action":"insert","lines":["s"]}],[{"start":{"row":58,"column":8},"end":{"row":58,"column":9},"action":"insert","lines":["t"],"id":206},{"start":{"row":58,"column":9},"end":{"row":58,"column":10},"action":"insert","lines":["y"]},{"start":{"row":58,"column":10},"end":{"row":58,"column":11},"action":"insert","lines":["l"]},{"start":{"row":58,"column":11},"end":{"row":58,"column":12},"action":"insert","lines":["e"]},{"start":{"row":58,"column":12},"end":{"row":58,"column":13},"action":"insert","lines":[">"]}],[{"start":{"row":58,"column":13},"end":{"row":104,"column":1},"action":"insert","lines":["     body {","        font-family: 'Lucida Grande', 'Lucida Sans Unicode', 'Geneva', 'Verdana', sans-serif;","        margin: 0px;","        background-color: #07163f;","      }","      .axis path {","        fill: none;","        stroke: #FFF;","        stroke-dasharray: 2 3;","      }","      .axis text {","        font-size: 13px;","        stroke: #222;","      }","      h1 {","        font-size: 48px;","        color: #cab122;","      }","      text.title {","        font-size: 24px;","      }","      circle.tick {","        fill: \"yellow\";","        stroke: \"yellow\";","        stroke-dasharray: 2 3;","      }","      path.spiral {","        fill: none;","        stroke: #cab122;","        stroke-width: 3px;","      }","      ","      div.tooltip {\t","    position: absolute;\t\t\t","    text-align: center;\t\t\t","    width: 220px;\t\t\t\t\t","    height:120 px;\t\t\t\t\t","    padding: 2px;\t\t\t\t","    line-height: 24;","    letter-spacing: 2;","    font: 18px Garamond;\t\t","    background: none;\t","    border: 0px;\t\t","    border-radius: 0px;\t\t\t","    pointer-events: none;\t\t","    color: #cab122;","}"],"id":207}],[{"start":{"row":104,"column":1},"end":{"row":105,"column":0},"action":"insert","lines":["",""],"id":208},{"start":{"row":105,"column":0},"end":{"row":105,"column":1},"action":"insert","lines":["<"]},{"start":{"row":105,"column":1},"end":{"row":105,"column":2},"action":"insert","lines":["/"]},{"start":{"row":105,"column":2},"end":{"row":105,"column":3},"action":"insert","lines":["s"]},{"start":{"row":105,"column":3},"end":{"row":105,"column":4},"action":"insert","lines":["t"]}],[{"start":{"row":105,"column":4},"end":{"row":105,"column":5},"action":"insert","lines":["y"],"id":209},{"start":{"row":105,"column":5},"end":{"row":105,"column":6},"action":"insert","lines":["l"]},{"start":{"row":105,"column":6},"end":{"row":105,"column":7},"action":"insert","lines":["e"]},{"start":{"row":105,"column":7},"end":{"row":105,"column":8},"action":"insert","lines":[">"]}],[{"start":{"row":187,"column":19},"end":{"row":187,"column":23},"action":"remove","lines":["null"],"id":210},{"start":{"row":187,"column":19},"end":{"row":187,"column":20},"action":"insert","lines":["\""]},{"start":{"row":187,"column":20},"end":{"row":187,"column":21},"action":"insert","lines":["n"]},{"start":{"row":187,"column":21},"end":{"row":187,"column":22},"action":"insert","lines":["o"]},{"start":{"row":187,"column":22},"end":{"row":187,"column":23},"action":"insert","lines":["n"]},{"start":{"row":187,"column":23},"end":{"row":187,"column":24},"action":"insert","lines":["e"]}],[{"start":{"row":187,"column":24},"end":{"row":187,"column":25},"action":"insert","lines":["\""],"id":211}],[{"start":{"row":148,"column":22},"end":{"row":149,"column":0},"action":"insert","lines":["",""],"id":212},{"start":{"row":149,"column":0},"end":{"row":149,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":149,"column":6},"end":{"row":150,"column":0},"action":"insert","lines":["      block.end ='none'",""],"id":213}],[{"start":{"row":149,"column":29},"end":{"row":150,"column":0},"action":"remove","lines":["",""],"id":214}],[{"start":{"row":149,"column":0},"end":{"row":149,"column":2},"action":"remove","lines":["  "],"id":215}],[{"start":{"row":149,"column":0},"end":{"row":149,"column":2},"action":"remove","lines":["  "],"id":216}],[{"start":{"row":149,"column":0},"end":{"row":149,"column":2},"action":"remove","lines":["  "],"id":217}],[{"start":{"row":149,"column":23},"end":{"row":149,"column":24},"action":"insert","lines":[";"],"id":218}],[{"start":{"row":143,"column":41},"end":{"row":144,"column":0},"action":"insert","lines":["",""],"id":219},{"start":{"row":144,"column":0},"end":{"row":144,"column":2},"action":"insert","lines":["  "]},{"start":{"row":144,"column":2},"end":{"row":145,"column":0},"action":"insert","lines":["",""]},{"start":{"row":145,"column":0},"end":{"row":145,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":145,"column":2},"end":{"row":146,"column":0},"action":"insert","lines":["      var block = {};",""],"id":220}],[{"start":{"row":145,"column":23},"end":{"row":146,"column":0},"action":"insert","lines":["",""],"id":221},{"start":{"row":146,"column":0},"end":{"row":146,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":146,"column":8},"end":{"row":147,"column":0},"action":"insert","lines":["      block.end ='none';",""],"id":222}],[{"start":{"row":146,"column":0},"end":{"row":146,"column":2},"action":"remove","lines":["  "],"id":223}],[{"start":{"row":146,"column":0},"end":{"row":146,"column":2},"action":"remove","lines":["  "],"id":224}],[{"start":{"row":146,"column":0},"end":{"row":146,"column":2},"action":"remove","lines":["  "],"id":225}],[{"start":{"row":409,"column":45},"end":{"row":409,"column":69},"action":"remove","lines":["a WHERE sensorValue > 2;"],"id":226}],[{"start":{"row":409,"column":20},"end":{"row":409,"column":21},"action":"insert","lines":["*"],"id":227}],[{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["s"],"id":228},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["e"]},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["n"]},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["s"]},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["o"]},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["r"]},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["T"]},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["i"]},{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["m"]}],[{"start":{"row":409,"column":21},"end":{"row":409,"column":22},"action":"remove","lines":["e"],"id":229}],[{"start":{"row":409,"column":35},"end":{"row":409,"column":36},"action":"insert","lines":["a"],"id":230}],[{"start":{"row":409,"column":35},"end":{"row":409,"column":36},"action":"remove","lines":["a"],"id":231}],[{"start":{"row":409,"column":36},"end":{"row":409,"column":37},"action":"insert","lines":["a"],"id":232}],[{"start":{"row":415,"column":12},"end":{"row":415,"column":62},"action":"remove","lines":["var resp = s1x + JSON.stringify(qres.rows) + s2x; "],"id":233}],[{"start":{"row":416,"column":27},"end":{"row":417,"column":0},"action":"insert","lines":["",""],"id":234},{"start":{"row":417,"column":0},"end":{"row":417,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":417,"column":12},"end":{"row":417,"column":62},"action":"insert","lines":["var resp = s1x + JSON.stringify(qres.rows) + s2x; "],"id":235}],[{"start":{"row":416,"column":27},"end":{"row":417,"column":0},"action":"insert","lines":["",""],"id":236},{"start":{"row":417,"column":0},"end":{"row":417,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":417,"column":12},"end":{"row":419,"column":9},"action":"insert","lines":["setTimeout(function(){","    //do what you need here","}, 2000);"],"id":237}],[{"start":{"row":420,"column":0},"end":{"row":421,"column":0},"action":"remove","lines":["            var resp = s1x + JSON.stringify(qres.rows) + s2x; ",""],"id":238}],[{"start":{"row":418,"column":0},"end":{"row":419,"column":0},"action":"remove","lines":["    //do what you need here",""],"id":239},{"start":{"row":418,"column":0},"end":{"row":419,"column":0},"action":"insert","lines":["            var resp = s1x + JSON.stringify(qres.rows) + s2x; ",""]}],[{"start":{"row":419,"column":3},"end":{"row":419,"column":4},"action":"remove","lines":["2"],"id":240}],[{"start":{"row":419,"column":3},"end":{"row":419,"column":4},"action":"insert","lines":["1"],"id":241}],[{"start":{"row":416,"column":0},"end":{"row":417,"column":0},"action":"remove","lines":["            res.send(resp);",""],"id":242}],[{"start":{"row":417,"column":62},"end":{"row":418,"column":0},"action":"insert","lines":["",""],"id":243},{"start":{"row":418,"column":0},"end":{"row":418,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":418,"column":12},"end":{"row":419,"column":0},"action":"insert","lines":["            res.send(resp);",""],"id":244}],[{"start":{"row":418,"column":0},"end":{"row":418,"column":2},"action":"remove","lines":["  "],"id":245}],[{"start":{"row":418,"column":0},"end":{"row":418,"column":2},"action":"remove","lines":["  "],"id":246}],[{"start":{"row":418,"column":0},"end":{"row":418,"column":2},"action":"remove","lines":["  "],"id":247}],[{"start":{"row":418,"column":0},"end":{"row":418,"column":2},"action":"remove","lines":["  "],"id":248}],[{"start":{"row":418,"column":0},"end":{"row":418,"column":2},"action":"remove","lines":["  "],"id":249}],[{"start":{"row":418,"column":0},"end":{"row":418,"column":2},"action":"remove","lines":["  "],"id":250}],[{"start":{"row":419,"column":0},"end":{"row":420,"column":0},"action":"remove","lines":["",""],"id":251}],[{"start":{"row":419,"column":3},"end":{"row":419,"column":4},"action":"remove","lines":["1"],"id":252}],[{"start":{"row":419,"column":3},"end":{"row":419,"column":4},"action":"insert","lines":["5"],"id":253}],[{"start":{"row":36,"column":37},"end":{"row":36,"column":38},"action":"insert","lines":[" "],"id":254},{"start":{"row":36,"column":38},"end":{"row":36,"column":39},"action":"insert","lines":["W"]},{"start":{"row":36,"column":39},"end":{"row":36,"column":40},"action":"insert","lines":["H"]},{"start":{"row":36,"column":40},"end":{"row":36,"column":41},"action":"insert","lines":["E"]},{"start":{"row":36,"column":41},"end":{"row":36,"column":42},"action":"insert","lines":["R"]},{"start":{"row":36,"column":42},"end":{"row":36,"column":43},"action":"insert","lines":["E"]}],[{"start":{"row":36,"column":43},"end":{"row":36,"column":44},"action":"insert","lines":[" "],"id":255},{"start":{"row":36,"column":44},"end":{"row":36,"column":45},"action":"insert","lines":["S"]}],[{"start":{"row":36,"column":45},"end":{"row":36,"column":46},"action":"insert","lines":["E"],"id":256},{"start":{"row":36,"column":46},"end":{"row":36,"column":47},"action":"insert","lines":["N"]},{"start":{"row":36,"column":47},"end":{"row":36,"column":48},"action":"insert","lines":["S"]},{"start":{"row":36,"column":48},"end":{"row":36,"column":49},"action":"insert","lines":["O"]},{"start":{"row":36,"column":49},"end":{"row":36,"column":50},"action":"insert","lines":["R"]}],[{"start":{"row":36,"column":50},"end":{"row":36,"column":51},"action":"insert","lines":[" "],"id":257}],[{"start":{"row":36,"column":50},"end":{"row":36,"column":51},"action":"remove","lines":[" "],"id":258},{"start":{"row":36,"column":49},"end":{"row":36,"column":50},"action":"remove","lines":["R"]},{"start":{"row":36,"column":48},"end":{"row":36,"column":49},"action":"remove","lines":["O"]},{"start":{"row":36,"column":47},"end":{"row":36,"column":48},"action":"remove","lines":["S"]},{"start":{"row":36,"column":46},"end":{"row":36,"column":47},"action":"remove","lines":["N"]},{"start":{"row":36,"column":45},"end":{"row":36,"column":46},"action":"remove","lines":["E"]},{"start":{"row":36,"column":44},"end":{"row":36,"column":45},"action":"remove","lines":["S"]}],[{"start":{"row":36,"column":44},"end":{"row":36,"column":45},"action":"insert","lines":["s"],"id":259},{"start":{"row":36,"column":45},"end":{"row":36,"column":46},"action":"insert","lines":["e"]},{"start":{"row":36,"column":46},"end":{"row":36,"column":47},"action":"insert","lines":["n"]}],[{"start":{"row":36,"column":44},"end":{"row":36,"column":47},"action":"remove","lines":["sen"],"id":260},{"start":{"row":36,"column":44},"end":{"row":36,"column":54},"action":"insert","lines":["sensorTime"]}],[{"start":{"row":36,"column":54},"end":{"row":36,"column":55},"action":"insert","lines":[" "],"id":261}],[{"start":{"row":36,"column":55},"end":{"row":36,"column":56},"action":"insert","lines":[">"],"id":262}],[{"start":{"row":36,"column":56},"end":{"row":36,"column":57},"action":"insert","lines":[" "],"id":263}],[{"start":{"row":36,"column":56},"end":{"row":36,"column":57},"action":"remove","lines":[" "],"id":264},{"start":{"row":36,"column":55},"end":{"row":36,"column":56},"action":"remove","lines":[">"]},{"start":{"row":36,"column":54},"end":{"row":36,"column":55},"action":"remove","lines":[" "]}],[{"start":{"row":36,"column":20},"end":{"row":36,"column":21},"action":"remove","lines":["*"],"id":265}],[{"start":{"row":36,"column":20},"end":{"row":36,"column":21},"action":"insert","lines":["5"],"id":266}],[{"start":{"row":36,"column":37},"end":{"row":36,"column":54},"action":"remove","lines":[" WHERE sensorTime"],"id":267}],[{"start":{"row":36,"column":20},"end":{"row":36,"column":21},"action":"remove","lines":["5"],"id":268}],[{"start":{"row":36,"column":20},"end":{"row":36,"column":21},"action":"insert","lines":["5"],"id":269},{"start":{"row":36,"column":21},"end":{"row":36,"column":22},"action":"insert","lines":["0"]}],[{"start":{"row":36,"column":20},"end":{"row":36,"column":21},"action":"insert","lines":["1"],"id":270}],[{"start":{"row":36,"column":20},"end":{"row":36,"column":21},"action":"remove","lines":["1"],"id":271}],[{"start":{"row":36,"column":20},"end":{"row":36,"column":21},"action":"insert","lines":["1"],"id":272}],[{"start":{"row":36,"column":21},"end":{"row":36,"column":22},"action":"remove","lines":["5"],"id":273}],[{"start":{"row":409,"column":0},"end":{"row":410,"column":0},"action":"remove","lines":["    var q = `SELECT * FROM sensorData`;",""],"id":274},{"start":{"row":409,"column":0},"end":{"row":410,"column":0},"action":"insert","lines":["    var q = \"SELECT 10 FROM sensorData\";",""]}],[{"start":{"row":416,"column":0},"end":{"row":416,"column":34},"action":"remove","lines":["            setTimeout(function(){"],"id":275}],[{"start":{"row":419,"column":0},"end":{"row":419,"column":9},"action":"remove","lines":["}, 5000);"],"id":277}],[{"start":{"row":418,"column":27},"end":{"row":419,"column":0},"action":"remove","lines":["",""],"id":278}],[{"start":{"row":415,"column":12},"end":{"row":416,"column":0},"action":"remove","lines":["",""],"id":279},{"start":{"row":415,"column":10},"end":{"row":415,"column":12},"action":"remove","lines":["  "]},{"start":{"row":415,"column":8},"end":{"row":415,"column":10},"action":"remove","lines":["  "]},{"start":{"row":415,"column":6},"end":{"row":415,"column":8},"action":"remove","lines":["  "]},{"start":{"row":415,"column":4},"end":{"row":415,"column":6},"action":"remove","lines":["  "]},{"start":{"row":415,"column":2},"end":{"row":415,"column":4},"action":"remove","lines":["  "]},{"start":{"row":415,"column":0},"end":{"row":415,"column":2},"action":"remove","lines":["  "]},{"start":{"row":414,"column":14},"end":{"row":415,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":409,"column":20},"end":{"row":409,"column":22},"action":"remove","lines":["10"],"id":280},{"start":{"row":409,"column":20},"end":{"row":409,"column":21},"action":"insert","lines":["*"]}],[{"start":{"row":144,"column":0},"end":{"row":146,"column":26},"action":"remove","lines":["  ","        var block = {};","        block.end ='none';"],"id":281}],[{"start":{"row":428,"column":94},"end":{"row":428,"column":140},"action":"remove","lines":["WHERE mtgday = 'Mondays' and mtgstarthour >= 7"],"id":285},{"start":{"row":428,"column":93},"end":{"row":428,"column":94},"action":"remove","lines":[" "]}],[{"start":{"row":428,"column":68},"end":{"row":428,"column":69},"action":"insert","lines":[" "],"id":286}],[{"start":{"row":428,"column":69},"end":{"row":428,"column":70},"action":"insert","lines":["l"],"id":287}],[{"start":{"row":428,"column":69},"end":{"row":428,"column":70},"action":"remove","lines":["l"],"id":288},{"start":{"row":428,"column":69},"end":{"row":428,"column":77},"action":"insert","lines":["location"]}],[{"start":{"row":428,"column":77},"end":{"row":428,"column":78},"action":"insert","lines":[","],"id":289}],[{"start":{"row":428,"column":69},"end":{"row":428,"column":77},"action":"remove","lines":["location"],"id":290}],[{"start":{"row":428,"column":28},"end":{"row":428,"column":78},"action":"remove","lines":["mtgday, mtgstart, placeName, mtgaddress, , mtgtype"],"id":291},{"start":{"row":428,"column":28},"end":{"row":428,"column":29},"action":"insert","lines":["*"]}]]},"ace":{"folds":[],"scrolltop":5880,"scrollleft":0,"selection":{"start":{"row":430,"column":28},"end":{"row":430,"column":28},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":66,"state":["string.quasi.start","no_regex"],"mode":"ace/mode/javascript"}},"timestamp":1544818854607,"hash":"039827ce571e0162ef5dd940ddc9283b69cb35f7"}